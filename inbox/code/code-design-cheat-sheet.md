# code-design-cheat-sheet

## 原则
相互独立，完全穷尽。

## 需求实现 checklist
流程图加文档的方式思考需求与代码实现。
1. 捋清晰需求场景（为什么实现这个需求）
2. 对原有功能&数据是否会带来影响
3. 细化需求场景，捋清晰代码逻辑（如何实现这个需求）
4. 轻重层次分明，满足核心需求，考虑成本的情况下弱化相关其他需求的开发成本。（综合思考方案）

## 先总览，再分解组合
先用思维导图的方式规划出所有的函数，对其拆分组合形成新模块。

## 代码 checklist
用检查清单最后检查 API 设计是否合理后再交付。
- 整体思考优化方案，函数提取与统一利用。
- 常量提取
- 网络传输部分统一处理
- 相互独立-每个函数完成单一功能
- 通过函数注解的方式注解相关的类型，防止出错
- 日志打印必要的信息
- 完全穷尽-极端情况考量
- 主次分明-将次要的功能舍去或放在下一个版本
- 单元测试
- 线上有埋点，从而测试性能

## bug 评估 checklist
- 是偶发性问题还是经常性问题？
  - 经常性 bug
    - 问题的本质是什么
    - Bug 的影响是什么
  - 偶发性 bug
    - 为什么在这个时间段报错，而不是在其他时间段报错
      - 问题的本质是什么
      - Bug 的影响是什么
- 锁定问题后复现出报错场景。
- 问题影响评估。

## 代码上传生产 checklist
- 过静态检查。
- 日志打印和输出只使用 Error 以上的等级。
  - 函数运行信息为 DEBUG 级别
  - 关键信息为 INFO 级别（例如进度情况输出）
    - 长时间跑的脚本务必注意打印进度的情况。
  - 报错信息为 ERROR 级别。
- 对可能的出错点做处理，预留足够的信息。